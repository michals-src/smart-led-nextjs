import React from "react";
import Head from "next/head";
import Link from "next/link";
import { useRouter } from "next/router";

import { ClockIcon, HomeIcon } from "@heroicons/react/24/solid";

import ModalProvider from "@context/modal/modalProvider";
import PopupProvider from "@context/popup/popupProvider";
import Popup from "../popup/Popup";

const globalNavigation = {
  Dom: {
    icon: HomeIcon,
    href: "/",
  },
  Sceny: {
    icon: ClockIcon,
    href: "/scenes",
  },
};

const Navigation = () => {
  const router = useRouter();

  return (
    <div
      className='fixed max-w-lg w-full bottom-0 left-0 z-50 text-white p-2'
      style={{
        // background: "linear-gradient(to bottom, rgb(42 42 45) 0%, rgb(39 39 42)  100%)",
        left: "50%",
        transform: "translateX(-50%)",
      }}>
      <div
        className='w-full h-full bg-orange-900 shadow-lg py-2 px-3'
        style={{ borderRadius: "100px" }}>
        <div className='w-full flex flex-row flex-nowrap flex-auto items-center justify-between mx-auto h-full'>
          {Object.keys(globalNavigation).map((key, id) => {
            const LinkIcon = globalNavigation[key].icon;

            return (
              <>
                <div
                  className='w-full'
                  key={id}>
                  <Link href={globalNavigation[key].href}>
                    <div className={`px-4 py-3 rounded-3xl ${router.asPath === globalNavigation[key].href ? "bg-orange-700 shadow-md" : ""}`}>
                      <div className='cursor-pointer table mx-auto'>
                        <div className='flex flex-row flex-nowrap w-auto'>
                          <div>
                            <LinkIcon className='w-6 h-4 text-inherit' />
                          </div>
                          <p className='text-sm ml-6'>{key}</p>
                        </div>
                      </div>
                    </div>
                  </Link>
                </div>
              </>
            );
          })}
        </div>
      </div>
    </div>
  );
};

export default function Layout({ children, ...props }) {
  const { title } = props;

  return (
    <>
      <Head>
        <title>Smart Light {title ?? title}</title>
        <meta
          name='description'
          content='Generated by create next app'
        />
        <link
          rel='icon'
          href='/favicon.ico'
        />
        {/* <meta
          name='viewport'
          content='width = device-width, initial-scale = 1.0, minimum-scale = 1, maximum-scale = 1, user-scalable = no'
        /> */}

        <meta
          name='apple-mobile-web-app-title'
          content='App name'
        />
        <meta
          name='apple-mobile-web-app-capable'
          content='yes'
        />
        <meta
          name='apple-mobile-web-app-status-bar-style'
          content='black'
        />
        <meta
          name='viewport'
          content='viewport-fit=cover, user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1'
        />
      </Head>

      <div className='max-w-sm min-h-screen mx-auto bg-zinc-900 text-white pb-16 relative'>
        <ModalProvider>
          <PopupProvider>
            <main>{children}</main>
            <Navigation />
            <Popup />
          </PopupProvider>
        </ModalProvider>

        {/* <footer className='p-8'>
                    Hi there.
                </footer> */}
      </div>
    </>
  );
}
